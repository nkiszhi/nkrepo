# ServerScript
此库为服务器自动化维护脚本代码库
## 注意事项（写在最前面）
1. 各位可以随意修改本Readme.md文件，以用于告诉大家有什么需要注意的地方。
2. 向服务器端传送代码后请记住修改Readme.md中的服务器代码版本信息。
3. 请一定要按照提交信息的要求格式说明提交信息，以便于其他人阅读。
4. 绝对**禁止使用push -f**等强制覆盖云端程序的指令。
5. 当自己引入某些需要单独安装的程序包时，请注意更新Readme.md中对程序包的说明。
6. 当在根目录下创建文件夹或者文件时，请在Readme.md中说明其作用和注意事项。
7. 请尽量使用驼峰命名法。
8. 请在每次提交前**确保代码准确**，可以运行，**运行结果无误**。
9. 提交代码时，**请注意所在git的分支**，每个脚本一个分支，即main(主脚本)，nkaz，nkvs，nkvt。
## 服务器目前版本如下
请将代码提交到服务器的同学更新一下此处的版本
```
2021-7-7最新版本
```
## 提交说明格式要求
更改的脚本部分:更改的内容说明，例如：
```
nkaz:自动下载功能更新
nkvs:已知bug修复
nkvt:修复已知bug，更新状态查询
```
## 目前需要的程序包
### python
1. wget
2. rsa
3. pr
4. paramiko
9. requests
10. re
16. virustotal-api
17. queue
18. argparse
10. flask
11. pefile
12. zipfile
## 文件夹和文件说明
### instructionsend.py
用于**本地**向服务器端发送命令信息。  
### scriptmain.py
服务器自动维护脚本主启动文件，和指令接收程序，使用如下命令进行运行。
```
python scriptstart.py
```
请在编写时让scriptmain.py尽量简单化，使用import的方法将写好的代码从各个脚本文件夹中引入scriptmain.py中运行。
### serverupdate.py
用于自动在服务器上部署文件，**各个文件夹中的data文件夹也会被上传**。目前此脚本只支持部署，不支持将脚本自动运行的功能，需要自己登上服务器然后启动脚本。同时此脚本不支持debug模式，只会将文件在服务器相关位置上进行部署。
### nkvs
存放了nkvs的维护代码。
### nkvt
存放了nkvt的维护代码。
### nkaz
存放了nkaz的维护代码。
### main
存放了全脚本主进程的相关文件，包括了服务连接，指令管理器，异常处理器。
### instruction
存放了各种说明，具体如下
|文件名|内容说明|
|:-:|:-:|
|nkaz.md|存放了nkaz具体维护脚本的指令说明|
|nkvs.md|存放了nkvs具体维护脚本的指令说明|
|nkvt.md|存放了nkvt具体维护脚本的指令说明|
|instructionsend.md|存放了instructionsend脚本的指令说明|
|Total.md|存放了各种接口的说明和开发细则|
|maininst.md|存放了主控进程的指令说明|

**请注意，将你所写的具体维护脚本的具体使用说明放到对应的说明文档中**，以方便他人使用，例子请看maininst.md

## 其他
1. .gitignore已经放在根目录下，可以随时补充。
2. 主控进程默认提供服务的端口为4000